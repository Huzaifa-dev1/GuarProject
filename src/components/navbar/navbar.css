@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap");

/* ===== Theme tokens ===== */
:root{
  --bg:#ffffff; --text:#1e1f1d; --muted:#6e756f; --line:#e7ebe5;
  --olive:#6f8f3a; --olive-underline:#6f8f3a; --menu-bg:#ffffff;
  --shadow:0 6px 28px rgba(0,0,0,0.08);
  --nav-h:56px;             /* mobile */
}
@media (min-width:640px){ :root{ --nav-h:60px; } }
@media (min-width:768px){ :root{ --nav-h:64px; } }
@media (min-width:1024px){ :root{ --nav-h:72px; } }

html[data-theme="dark"]{
  --bg:#131612; --text:#f0f3ed; --muted:#a9b3a6;
  --line:#232a23; --menu-bg:#171b17; --shadow:0 10px 30px rgba(0,0,0,.35);
}



/* Prevent horizontal scroll on main container only */
#root,
.App,
main {
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}

/* Ensure all sections stay visible (override Framer Motion) */
section {
  opacity: 1 !important;
}

/* Remove the scroll-based opacity transforms */
.products,
.guar-alfalfa-about-section,
[class*="section"] {
  opacity: 1 !important;
}
*{ box-sizing:border-box; }
html{ width:100%; margin:0; padding:0; }
body{ width:100%; margin:0; padding:0; }
body{ font-family:"Poppins",sans-serif; }

/* ===== Fixed Navbar ===== */
.nav{
  position:fixed; top:env(safe-area-inset-top,0); left:0; right:0; z-index:50;
  width:100%; max-width:100vw;
  background:var(--bg); color:var(--text); border-bottom:1px solid var(--line);
  transition:background .35s, border-color .35s, box-shadow .35s, backdrop-filter .35s;
  overflow:visible;
}
.nav--scrolled{ box-shadow:0 4px 18px rgba(0,0,0,.06); }
.nav--over-hero{ background:transparent; border-color:transparent; box-shadow:none; }

/* ===== Bar layout ===== */
.nav__inner{
  width:100%; max-width:1240px; margin:0 auto;
  padding:10px 12px;
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; min-width:0;
  position:relative;
}

@media (min-width:375px){
  .nav__inner{ padding:10px 14px; }
}

@media (min-width:640px){
  .nav__inner{ padding:12px 20px; gap:12px; }
}

@media (min-width:1024px){
  .nav__inner{ padding:12px 24px; gap:16px; }
}

/* Brand */
.nav__brand{
  font-weight:800; font-size:16px;
  letter-spacing:.04em; text-decoration:none; color:var(--text);
  white-space:nowrap; flex:0 1 auto; 
  transition:font-size .2s;
  overflow:hidden; text-overflow:ellipsis;
  max-width:calc(100vw - 140px);
}

@media (min-width:375px){
  .nav__brand{ font-size:17px; max-width:calc(100vw - 150px); }
}

@media (min-width:640px){
  .nav__brand{ font-size:18px; max-width:none; }
}

@media (min-width:1024px){
  .nav__brand{ font-size:20px; }
}

/* Desktop menu */
.nav__menu{ 
  display:none; min-width:0; flex:1 1 auto; 
  justify-content:center; gap:6px; 
}
@media (min-width:1024px){ 
  .nav__menu{ display:flex; } 
}

.nav__item{ position:relative; }
.nav__link{
  position:relative; display:inline-flex; align-items:center; gap:6px;
  padding:10px 12px; text-decoration:none; color:var(--text);
  font-weight:600; transition:color .2s; white-space:nowrap;
}
.nav__text{ position:relative; }
.nav__text::after{
  content:""; position:absolute; left:12px; right:12px; bottom:4px; height:2px;
  background:var(--olive-underline); transform:scaleX(0); transform-origin:left; transition:transform .22s ease;
}
.nav__link:hover, .nav__link.active{ color:var(--olive); }
.nav__link:hover .nav__text::after, .nav__link.active .nav__text::after{ transform:scaleX(1); }

.nav__caret{ opacity:.8; transition:transform .2s ease; flex-shrink:0; }
.has-children.is-open .nav__caret{ transform:rotate(180deg); }

/* Dropdown */
.nav__dropdown{
  position:absolute; top:calc(100% + 10px); left:8px; min-width:260px;
  background:var(--menu-bg); border:1px solid var(--line); border-radius:12px; box-shadow:var(--shadow);
  padding:10px; display:grid; gap:2px;
  opacity:0; visibility:hidden; transform:translateY(6px);
  transition:opacity .18s, transform .18s, visibility .18s;
}
.has-children.is-open .nav__dropdown{ opacity:1; visibility:visible; transform:translateY(0); }
.nav__dd-link{
  padding:10px 12px; border-radius:10px; text-decoration:none; color:var(--text);
  font-weight:600; transition:color .18s, transform .18s; white-space:normal;
}
.nav__dd-link:hover{ color:var(--olive); transform:translateX(2px); }

/* Right controls */
.nav__controls{
  margin-left:auto; display:inline-flex; align-items:center; 
  gap:6px; flex:0 0 auto; flex-shrink:0;
}

@media (min-width:375px){
  .nav__controls{ gap:8px; }
}

@media (min-width:640px){
  .nav__controls{ gap:10px; }
}

/* Theme toggle */
.theme-toggle{
  display:inline-flex; align-items:center; justify-content:center;
  gap:4px;
  border:1px solid var(--line); background:transparent;
  height:32px; padding:0 6px; border-radius:999px; cursor:pointer;
  white-space:nowrap; flex-shrink:0;
  transition:all .2s;
}

@media (min-width:375px){
  .theme-toggle{ padding:0 8px; gap:6px; }
}

@media (min-width:640px){
  .theme-toggle{ height:36px; padding:0 10px; gap:8px; }
}

.theme-toggle__label{ 
  font-size:9px; color:var(--muted); font-weight:600;
  display:none;
}

@media (min-width:768px){
  .theme-toggle__label{ display:block; font-size:11px; }
}

@media (min-width:1024px){
  .theme-toggle__label{ font-size:12px; }
}

.theme-toggle__switch{
  width:32px; height:16px; border-radius:999px; background:#dfe4da; 
  position:relative; transition:background .2s; flex-shrink:0;
}

@media (min-width:375px){
  .theme-toggle__switch{ width:36px; height:18px; }
}

@media (min-width:640px){
  .theme-toggle__switch{ width:40px; height:20px; }
}

@media (min-width:1024px){
  .theme-toggle__switch{ width:44px; height:22px; }
}

html[data-theme="dark"] .theme-toggle__switch{ background:#2b2f2a; }

.theme-toggle__switch::after{
  content:""; position:absolute; top:2px; left:2px; 
  width:12px; height:12px; border-radius:50%; background:#fff;
  transition:transform .22s ease;
}

@media (min-width:375px){
  .theme-toggle__switch::after{ width:14px; height:14px; }
}

@media (min-width:640px){
  .theme-toggle__switch::after{ width:16px; height:16px; }
}

@media (min-width:1024px){
  .theme-toggle__switch::after{ width:18px; height:18px; }
}

html[data-theme="dark"] .theme-toggle__switch::after{ 
  transform:translateX(16px); 
}

@media (min-width:375px){
  html[data-theme="dark"] .theme-toggle__switch::after{ 
    transform:translateX(18px); 
  }
}

@media (min-width:640px){
  html[data-theme="dark"] .theme-toggle__switch::after{ 
    transform:translateX(20px); 
  }
}

@media (min-width:1024px){
  html[data-theme="dark"] .theme-toggle__switch::after{ 
    transform:translateX(22px); 
  }
}

/* Burger */
.nav__burger{
  width:32px; height:32px; border-radius:8px;
  border:1px solid var(--line); background:transparent;
  display:grid; place-items:center; line-height:0;
  cursor:pointer; flex-shrink:0; padding:0;
  transition:all .2s;
}

@media (min-width:375px){
  .nav__burger{ width:34px; height:34px; }
}

@media (min-width:640px){
  .nav__burger{ width:38px; height:38px; border-radius:10px; }
}

@media (min-width:1024px){ 
  .nav__burger{ display:none; } 
}

.nav__burger span{
  width:16px; height:2px; background:var(--text); border-radius:2px; display:block;
  transition:transform .25s, opacity .2s, width .2s;
}

@media (min-width:375px){
  .nav__burger span{ width:18px; }
}

@media (min-width:640px){
  .nav__burger span{ width:20px; }
}

.nav__burger span + span{ margin-top:4px; }

@media (min-width:640px){
  .nav__burger span + span{ margin-top:5px; }
}

.nav__burger.is-active span:nth-child(1){ transform:translateY(6px) rotate(45deg); }
.nav__burger.is-active span:nth-child(2){ opacity:0; width:0; }
.nav__burger.is-active span:nth-child(3){ transform:translateY(-6px) rotate(-45deg); }

@media (min-width:640px){
  .nav__burger.is-active span:nth-child(1){ transform:translateY(7px) rotate(45deg); }
  .nav__burger.is-active span:nth-child(3){ transform:translateY(-7px) rotate(-45deg); }
}

/* ===== Mobile menu ===== */
.nav__mobile{
  max-height:0; overflow:hidden; background:var(--bg); border-bottom:1px solid var(--line);
  transition:max-height .3s ease;
  width:100%; max-width:100vw;
}
.nav__mobile.open{ max-height:80vh; overflow-y:auto; }

.mitem{ 
  padding:8px 12px; border-top:1px solid var(--line); 
}

@media (min-width:375px){
  .mitem{ padding:8px 14px; }
}

@media (min-width:640px){
  .mitem{ padding:10px 20px; }
}

.mitem__head{ 
  display:grid; grid-template-columns:1fr auto; 
  align-items:center; column-gap:8px; 
}

@media (min-width:640px){
  .mitem__head{ column-gap:10px; }
}

.mitem__link{ 
  text-decoration:none; color:var(--text); 
  font-weight:700; padding:8px 0; 
  font-size:13px;
  transition:color .2s;
  overflow:hidden; text-overflow:ellipsis;
}

@media (min-width:375px){
  .mitem__link{ font-size:14px; }
}

@media (min-width:640px){
  .mitem__link{ padding:10px 0; font-size:15px; }
}

.mitem__link:active{ color:var(--olive); }

.mitem__toggle{ 
  width:30px; height:30px; border:1px solid var(--line); 
  background:transparent; border-radius:8px; color:var(--text); 
  cursor:pointer; display:grid; place-items:center;
  transition:transform .2s; padding:0;
  flex-shrink:0;
}

@media (min-width:375px){
  .mitem__toggle{ width:32px; height:32px; }
}

@media (min-width:640px){
  .mitem__toggle{ width:34px; height:34px; }
}

.mitem__toggle.open{ transform:rotate(180deg); }

.mitem__body{ 
  display:grid; gap:2px; max-height:0; overflow:hidden; 
  transition:max-height .25s, padding .2s; 
}

.mitem__body.open{ 
  max-height:400px; padding-top:8px; padding-bottom:8px; 
}

.mitem__sublink{ 
  text-decoration:none; color:var(--text); 
  font-weight:600; padding:8px 0 8px 8px; 
  font-size:12px;
  transition:color .2s;
  display:block;
  overflow:hidden; text-overflow:ellipsis;
}

@media (min-width:375px){
  .mitem__sublink{ font-size:13px; padding:8px 0 8px 12px; }
}

@media (min-width:640px){
  .mitem__sublink{ font-size:14px; padding:8px 0 8px 16px; }
}

.mitem__sublink:active{ color:var(--olive); }

/* Smooth scrollbar for mobile menu */
.nav__mobile::-webkit-scrollbar{ width:4px; }
.nav__mobile::-webkit-scrollbar-track{ background:transparent; }
.nav__mobile::-webkit-scrollbar-thumb{ 
  background:var(--muted); border-radius:4px; 
}

/* Ultra-narrow devices */
@media (max-width:340px){
  .nav__inner{ padding:8px 10px; gap:6px; }
  .nav__brand{ font-size:15px; max-width:calc(100vw - 130px); }
  .nav__burger{ width:30px; height:30px; }
  .nav__burger span{ width:15px; }
  .theme-toggle{ height:30px; padding:0 5px; gap:3px; }
  .theme-toggle__switch{ width:28px; height:14px; }
  .theme-toggle__switch::after{ width:10px; height:10px; }
  html[data-theme="dark"] .theme-toggle__switch::after{ 
    transform:translateX(14px); 
  }
  .mitem{ padding:6px 10px; }
  .mitem__link{ font-size:12px; }
  .mitem__sublink{ font-size:11px; }
  .mitem__toggle{ width:28px; height:28px; }
}



/* Prevent horizontal scroll without breaking Framer Motion */
body > #root,
body > .app,
body > [data-reactroot] {
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}